<% content_for :javascript_includes do %>
  <%= javascript_include_tag "/assets/views/checklist_recommendations.js" %>
<% end %> 
<div class="clearfix"></div>
  <div class="content">
    <div class="container">
      <div class="row"> 
        <!-- Nav tabs --> 
        <div class="tab_main_title">Auditor Recommendation</div>
        <!-- Tab panes -->
        <div class="tab-content">
          <div class="tab-pane active" id="all">
            <div class="table-responsive">
              <table class="table table-striped list-table">
                <tr>
                  <th colspan="6">Audit of the equal Oppertunities Policy</th>
                </tr>
                <tr>
                  <td><label>Client : </label>
                   <span><%= @audit.client.name%></span></td>
                  <td><label>Title : </label>
                   <span><%= @audit.title.truncate(50) %></span></td>
                  <td><label>Scope : </label>
                    <span><%= @audit.scope.truncate(50) %></span></td>
                </tr>
                <tr>
                  <td><label>Team : </label>
                  <span> <%= @audit.team.name %></span> </td>
                  <td><label>Start Date : </label>
									<span> <%= @audit.start_date %></span> </td>
                  <td><label>End Date : </label>
                  <span><%= @audit.end_date %></span></td>
                </tr>
                <tr>
                  <td><label>Delivarable : </label>
                    <span><%= @audit.deliverables %> </span></td>
                  <td><label>Objective : </label>
                    <span><%= @audit.objective.truncate(50) %> </span></td>
                  <td><label>Context :</label>
                    <span><%= @audit.context.truncate(50)%>   </span></td>
                </tr>
                <tr>
                  <td><label>Method : </label>
                    <span><%= @audit.methodology.truncate(50) %> </span></td>
                  <td><label>Issues : </label>
                    <span>  <%= @audit.issue.truncate(50) %></span></td>
                  <td><label>Compliance : </label>
                    <span><%= @audit.compliance_type %></span></td>
                </tr>
                <tr>
								<% if @audit.compliance_type == 'Compliance' %>
                  <td><label>Standard : </label>
                    <span><%= standard_name(@audit) %></span></td>
								<% else %>
                  <td><label>Topic : </label>
                    <span> <%= standard_name(@audit) %></span></td>
                  <td></td>
								<% end %>
                </tr>
              </table>
            </div>
          </div>
          
         <div class="clearfix"></div>
                    
                    <div class="container">
                    <%= form_for(@checklist_recommendation) do |f| %>
                    <%= render "recommendation",f: f %>
                    </div>

                    <div class="clearfix"></div>
                    <div class="fright paddingtop">
                      <a class="black_btn" href="">Back</a> 
                      <!--<a class="grey_btn" href=""> Save Draft</a>-->
											<%= f.submit "Save Draft" , :class => "grey_btn", :onclick => "return control_checklist();save_draft_checklist();"%>
                      <%= f.submit "Overallscore" , :class => "orange_btn" , :onclick => "return control_checklist();"%></div>
                  </div>
                </div>  
              </div>
            </div>             
        <% end %>

<script type="text/javascript">
 $(window).load(function(){
  var $container = $('#grid_items');
  // initialize
  $container.masonry({
    columnWidth: 292,
    itemSelector: '.item',
    isFitWidth: true
  });
  
  
  $(".block_banner img").each(function(index, element) {
        var screenImage = $(this);

    // Create new offscreen image to test
    var theImage = new Image();
    theImage.src = screenImage.attr("src");
    
    var imageHeight = theImage.height;
    
    $(this).css("max-height",imageHeight);
    $(this).css("min-height",imageHeight);
    });
});

$(".click_icon").click(function() {
      $(".share_pop").show();
});

$(".click_icon").click(function(){
    $(".share_pop").show();
});
  
$(document).ready(function(){
  
  Top_postion = $(window).scrollTop();
  
  $( ".user_login" ).mouseenter(function() {
    $(this).addClass("active");
    $(".account_header_dropdown").slideDown(100);   
  })
  .mouseleave(function() {
    $(this).removeClass("active");
    $(".account_header_dropdown").hide();
  });
  
  //for notification drop hide in outside click
  onclick_icon = 0;   
  $(".click_icon").mouseenter(function() {
    onclick_icon = 0;   
  })
  .mouseleave(function() {
    onclick_icon = 1;   
  });
  
  
  $("body").click(function(){
    if(onclick_icon){
      $(".share_pop").hide();
    }
  });
  
  
  /* placeholder */
  $(".place_holder").each(function(index, element) {
    placeholder = $(this).attr("data-original");
    $(this).val(placeholder);
    $(this).removeClass("active");
    });

  $(".place_holder").focus(function(){
    placeholder = $(this).attr("data-original");
    current_value = $(this).val();
    if(current_value==placeholder){
      $(this).val("");
      $(this).addClass("active");
    }
  });
  $(".place_holder").blur(function(){
    placeholder = $(this).attr("data-original");
    current_value = $(this).val();
    if(current_value==""){
      $(this).val(placeholder);
      $(this).removeClass("active");
    }else{
      $(this).addClass("active");
    }
  });
  $(".place_holder").click(function(){
    placeholder = $(this).attr("data-original");
    current_value = $(this).val();
    if(current_value==placeholder){
      $(this).val("");
      $(this).addClass("active");
    }
  });
  /* placeholder */
  
  
});
/*$(window).scroll(function(){
  Top_postion = $(window).scrollTop();
  
  if(Top_postion>10){
    $(".go_to_top").show();
  }else{
    $(".go_to_top").hide();
  }
});
$(".go_to_top").click(function(){
  top = 0;
  $("html, body").animate({scrollTop: "0"}, 800);
});
*/
</script>
<link href="/assets/outer/jquery.ui.core.min.css" rel="stylesheet" type="text/css">
<link href="/assets/outer/jquery.ui.theme.min.css" rel="stylesheet" type="text/css">
<link href="/assets/outer/jquery.ui.accordion.min.css" rel="stylesheet" type="text/css">
<script src="/assets/outer/jquery-1.8.3.min.js" type="text/javascript"></script> 
<script src="/assets/outer/jquery-ui-1.9.2.accordion.custom.min.js" type="text/javascript"></script> 
<script type="text/javascript">
$(function() {
  $( "#Accordion1" ).accordion(); 
});
</script>
<script>
            $(document).ready(function() {
              // create DatePicker from input HTML element

              $(".datepicker2").kendoDatePicker();

              $(".score_points").click(function(){
                $(".score_points").removeClass('active')
                $(this).addClass('active')
              })     
            });
              
              
          // ajax for submitting the score method
          function save_individual_score(id)
          {
              var recommendation = $("#recommendation_" +id).val()
              var recommendation_priority = $("#recommendation_priority_id_" +id).val()
              var reason = $("#reason_" +id).val()
              var recommendation_severity = $("#recommendation_severity_id_" +id).val()
              var closure_date = $("#closure_date_" +id).val()
              var recommendation_status = $("#recommendation_status_id_" +id).val()
              var recommendation_severity = $("#recommendation_severity_id_" +id).val()
              $.ajax({
                  url: "/checklist_recommendations/update_individual_score",
                  type: "POST",
                  beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',jQuery('meta[name="csrf-token"]').attr("content")); },
                  data: {checklist_id :  id, checklist_type: 'AuditCompliance', recommendation: recommendation, reason: reason, closure_date: closure_date, recommendation_priority_id: recommendation_priority, recommendation_severity_id: recommendation_severity, recommendation_status_id: recommendation_status },
                  }).done(function() {
              });
          } 
        </script>
