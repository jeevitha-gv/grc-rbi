

 <link href="/assets/bootstrap-multiselect.js" rel="stylesheet" media="screen">
 <link href="/assets/prettify.js" rel="stylesheet" media="screen">
 <link href="/assets/typehead.js" rel="stylesheet" media="screen">
 <link rel="stylesheet" type="text/css" href="/assets/bootstrap-multiselect.css">
 <link rel="stylesheet" type="text/css" href="/assets/prettify.css">
  <div class="clearfix"></div>


  <div class="clearfix"></div>
  <div class="content">
    <div class="container">
      <div>
        <!-- Nav tabs
         <div class="risk-title">Risk Mitigation</div>
         </div>
         </div>
         <!------------Risk box ---------->
         <div class="container">
         <div>
          <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
            <div class="mitigation-box-wrap">
              <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
              <div class="red-box">
                  <div class="number">10</div>
                    <div class="text">High</div>
                </div>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12 ">
                    <div class="mitigate-inner mitigate-box">
                        <div class="risk-box-lable">Risk Id :</div>
                        <div class="risk-box-text"><%= risk.id %></div>
                    </div>
                </div>
                </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
             <div class="mitigation-box-wrap">
              <div class="mitigation-sub">
                  <div class="risk-box-lable">Subject:</div>
                    <div class="risk-box-text"><%= risk.subject %></div>
                </div>
                </div>
            </div>
             <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
            <div class="mitigation-box-wrap">
              <div class="mitigation-status">
                  <div class="risk-box-lable">Status:</div>
                    <div class="risk-box-text"><%= risk.risk_status.name %></div>
                </div>
                </div>
            </div>
         </div>

         <div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
               <div class="tab-pane active" id="all">
            <div class="table-responsive">
              <table class="table table-striped table-bg">
                <tr>
                  <th colspan="6" class="risk-able-th">Security process for conveyance operators</th>
                </tr>
                <tr>
                  <td><label>Control Number : </label>
                   <%= risk.subject %></td>
                  <td><label> Reference Id : </label>
                    <%= risk.reference %></td>
                  <td><label>Site / Location : </label>
                    <%= risk.location.name %></td>
                </tr>
                <tr>
                  <td><label>Category : </label>
                    <span> Access Management</span></td>
                  <td><label>Technology : </label>
                    <%= risk.technology.name %></td>
                  <td><label>Owner :</label>
                    <%= risk.owner %></td>
                </tr>
                <tr>
                  <td><label>Ownerâs Manager: </label>
                    <%= risk.risk_owner_user_name %></td>
                  <td><label>Team : </label>
                    <%= risk.team.name %></td>
                  <td><label> Scoring Method :</label>
                    <%= risk.risk_scoring_scoring_type %></td>
                </tr>
              </table>
            </div>
          </div>
            </div>
         </div>
         <!---------------Table 2 -------->
         <div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="risk-assetes">
              <div class="mitigation-recomm">
                <div class="mit-reccom-title">Risk Assesment</div>
                <%= risk.assessment %>
                </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="mitigation-recomm">
                <div class="mit-reccom-title">Additional Note</div>
                <%= risk.notes %>
                </div>
            </div>
         </div>
          <!---------------form 1 -------->
         <div>
           <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="mit-plan-effort">
              <div class="mitigation-percive">
                <div class="mit-reccom-title-sp">Plan Effort</div>
                <div class="risk-wrap clearfix">
                <div class="sub-wrap-bg">
                  <div  class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <!--Row first ------------>
               <!-- <div>
                 <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 ">
                  <%#= form_for (risk) do |f| %>
                  <%= form_for(risk, url: {controller: "mitigations", action: "create"},:method => "post" ,html: {:class =>"form-horizontal", :id => "role"}) do |f| %>

                       <%= f.fields_for :control_measure do |control| %>
                     <div class="form-group clearfix">
                        <label for="inputEmail3" class="col-sm-4 control-label">Control</label>
                       <div class="col-sm-8">
                            <div class="risk-select">
                             <%= control.collection_select  :control_ids, CppMeasure.for_name("Control"),  :id, :name,{}, {:id => "multiselect1"} %>
														 			<%#= control.select :modular_id,options_for_select(@controls, :id, :name), {},{:id => "privilege_modular_id", :selected =>"", :class=> "test"}%>
														     <%#= select("control", "control_ids", options_from_collection_for_select(@controls, :id, :name), {}, {:id=> "multiselect", :multipart =>"multiple" }) %>
                            </div>
                    </div>
                   </div>
                  </div>
                  </div>
                   <!--Row first ------------>
                <div>
                 <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 ">
                     <div class="form-group clearfix">
                        <label for="inputEmail3" class="col-sm-4 control-label">Control</label>
                       <div class="col-sm-8">
                            <div class="risk-select">
                             <%= control.collection_select  :control_ids, CppMeasure.for_name("Control"), :id, :name,{}, {:id => "multiselect1s"} %>
                                  <%#= control.select :modular_id,options_for_select(@controls, :id, :name), {},{:id => "privilege_modular_id", :selected =>"", :class=> "test"}%>
                                 <%#= select("control", "control_ids", options_from_collection_for_select(@controls, :id, :name), {}, {:id=> "multiselect", :multipart =>"multiple" }) %>
                            </div>
                    </div>
                   </div>
                  </div>
                  </div>

                 <!--Row first ------------>
                <div>
                 <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 ">
                     <div class="form-group clearfix">
                        <label for="inputEmail3" class="col-sm-4 control-label">Process</label>
                       <div class="col-sm-8">
                            <div class="risk-select">
                             <%= control.collection_select(:process_ids, CppMeasure.for_name("Process"),  :id, :name, :prompt => true) %>
                            </div>
                    </div>
                   </div>
                  </div>
                  </div>
                 <!--Row first ------------>
                <div>
                 <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 ">
                     <div class="form-group clearfix">
                        <label for="inputEmail3" class="col-sm-4 control-label">Procedure</label>
                       <div class="col-sm-8">
                            <div class="risk-select">
                            <%= control.collection_select(:procedure_ids, CppMeasure.for_name("Procedure"),  :id, :name, :prompt => true) %>
                            </div>
                    </div>
                   </div>
                  </div>
                      <%end%>
                  </div>

                 <!--Row first ------------>
                <%= f.fields_for :mitigation do |mitigation| %>

                <div>
                 <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 ">
                     <div class="form-group clearfix">
                        <label for="inputEmail3" class="col-sm-4 control-label">Planning Strategy </label>
                       <div class="col-sm-8">
                           <%#= mitigation.collection_select(:planning_strategy_id, PlanningStrategy.all,  :id, :name, {:class => "multiselect"}, :multiple => "multiple") %>
                               <%= mitigation.select :planning_strategy_id,options_for_select(PlanningStrategy.all.collect{|x| [  x.name, x.id.to_i]}),{},{:class => 'multiselect' , :multiple => "multiple"}%>

                    </div>
                   </div>
                  </div>
                  </div>

                  <!--Row first ------------>
                <div>
                 <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12 ">
                     <div class="form-group clearfix">
                        <label for="inputEmail3" class="col-sm-4 control-label">Mitigation Effort  </label>
                       <div class="col-sm-8">
                            <div class="risk-select">
                             <%= mitigation.collection_select(:mitigation_effort_id, MitigationEffort.all, :id, :name, :prompt => true) %>
                            </div>
                    </div>
                   </div>
                  </div>
                  </div>
                   </div>
                    <div  class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                      <div>
                           <div class="text-area clearfix">
                              <label for="inputEmail3" class="col-sm-3 control-label"> <%= f.label :current_solution, t('risk.') %></label>
                                     <div class="col-sm-9">
                                     <%= mitigation.text_area :current_solution, :class=>"form-control risk-big-input", :value => "#{risk.mitigation.current_solution}" %>
                                     </div>
                                  </div>
                              </div>


                             <div>
                           <div class="text-area clearfix">
                              <label for="inputEmail3" class="col-sm-3 control-label">
                                <%= f.label :requirements, t('risk.security_requirements') %></label>
                                     <div class="col-sm-9">
                                      <%= mitigation.text_area :security_requirements, :class=>"form-control risk-big-input" %>
                                     </div>
                                  </div>
                                  </div>

                             <div>
                           <div class="text-area clearfix">
                              <label for="inputEmail3" class="col-sm-3 control-label">
                                <%= f.label :recommendations, t('risk.security_recommendations') %> </label>
                                     <div class="col-sm-9">
                                      <%= mitigation.text_area :security_recommendations, :class=>"form-control risk-big-input" %>
                                     </div>
                              </div>
                           </div>
                           <%end%>
                      </div>
                  </div>

                </div>
            </div>
            </div>
         </div>
           </div>


                <!---------------form 1 -------->
         <div>
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="mit-plan-effort">
              <div class="mitigation-percive">
                <div class="mit-reccom-title-sp">Perceived Score</div>
                  <div class="risk-wrap clearfix">
                    <div class="sub-wrap-bg">
                      <div  class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div>

                          <div class="text-area clearfix">
                            <label for="inputEmail3" class="col-sm-3 control-label">Threat</label>
                            <div class="col-sm-9">
                              <%= f.fields_for :control_measure do |control| %>
                              <%= control.text_area :threat, row: 2, class: "form-control risk-big-input"%>
                            </div>
                          </div>

                            <div class="text-area clearfix">
                              <label for="inputEmail3" class="col-sm-3 control-label">Effectiveness</label>
                              <div class="col-sm-9">
                                  <%= control.text_area :effectiveness, row: 2, class: "form-control risk-big-input"%>
                                </div>
                            </div>

                        </div>
                      </div>
                      <div  class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                        <div>
                          <div class="text-area clearfix">
                            <label for="inputEmail3" class="col-sm-3 control-label">Consequence</label>
                            <div class="col-sm-9">
                              <%= control.text_area :consequence, row: 2, class: "form-control risk-big-input"%>
                            </div>
                          </div>
                        </div>
                      </div>
                    <%end%>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

        <div class="container">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="method-padding">
				<% if risk.risk_scoring_scoring_type == 'ClassicScoring'%>
					 <%= render "/risks/classic_scoring",f: f, risk: risk %>
				<% elsif risk.risk_scoring_scoring_type == 'DreadScoring' %>
            <%=render "/risks/dread_scoring",f: f %>
        <% elsif risk.risk_scoring_scoring_type == 'CvssScoring' %>
            <%=render "/risks/cvss_scoring",f: f %>
        <% elsif risk.risk_scoring_scoring_type == 'OwaspScoring' %>
            <%=render "/risks/owasp_scoring",f: f %>
        <% elsif risk.risk_scoring_scoring_type == 'CustomScoring' %>
            <%=render "/risks/custom_scoring",f: f %>
				<% end %>
      </div>
    </div>
        <div class="btn-group">
          <a class="black_btn" href="">Back</a> <a class="grey_btn" href=""> Save </a>
           <!--<a class="orange_btn" href="">Submit</a>-->
         <%= f.submit "Submit" , :class => "orange_btn" %>
        </div>
      </div>
      </div>

      </div>
    </div>
  <% end %>
</div>

<script type="text/javascript">


$(window).load(function(){
  var $container = $('#grid_items');
  // initialize
  $container.masonry({
    columnWidth: 292,
    itemSelector: '.item',
    isFitWidth: true
  });

 $(".multiselect").multiselect({
    });

  $(".block_banner img").each(function(index, element) {
        var screenImage = $(this);

    // Create new offscreen image to test
    var theImage = new Image();
    theImage.src = screenImage.attr("src");

    var imageHeight = theImage.height;

    $(this).css("max-height",imageHeight);
    $(this).css("min-height",imageHeight);
    });
});

$(".click_icon").click(function() {
      $(".share_pop").show();
});

$(".click_icon").click(function(){
    $(".share_pop").show();
});



$(document).ready(function(){



  Top_postion = $(window).scrollTop();

  $( ".user_login" ).mouseenter(function() {
    $(this).addClass("active");
    $(".account_header_dropdown").slideDown(100);
  })
  .mouseleave(function() {
    $(this).removeClass("active");
    $(".account_header_dropdown").hide();
  });

  //for notification drop hide in outside click
  onclick_icon = 0;
  $(".click_icon").mouseenter(function() {
    onclick_icon = 0;
  })
  .mouseleave(function() {
    onclick_icon = 1;
  });


  $("body").click(function(){
    if(onclick_icon){
      $(".share_pop").hide();
    }
  });


  /* placeholder */
  $(".place_holder").each(function(index, element) {
    placeholder = $(this).attr("data-original");
    $(this).val(placeholder);
    $(this).removeClass("active");
    });

  $(".place_holder").focus(function(){
    placeholder = $(this).attr("data-original");
    current_value = $(this).val();
    if(current_value==placeholder){
      $(this).val("");
      $(this).addClass("active");
    }
  });
  $(".place_holder").blur(function(){
    placeholder = $(this).attr("data-original");
    current_value = $(this).val();
    if(current_value==""){
      $(this).val(placeholder);
      $(this).removeClass("active");
    }else{
      $(this).addClass("active");
    }
  });
  $(".place_holder").click(function(){
    placeholder = $(this).attr("data-original");
    current_value = $(this).val();
    if(current_value==placeholder){
      $(this).val("");
      $(this).addClass("active");
    }
  });
  /* placeholder */


});
/*$(window).scroll(function(){
  Top_postion = $(window).scrollTop();

  if(Top_postion>10){
    $(".go_to_top").show();
  }else{
    $(".go_to_top").hide();
  }
});
$(".go_to_top").click(function(){
  top = 0;
  $("html, body").animate({scrollTop: "0"}, 800);
});
*/
  (document).ready(function() {
        ('.multiselect').multiselect();
     });
</script>

